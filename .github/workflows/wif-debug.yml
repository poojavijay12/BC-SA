name: WIF Debug Minimal

on:
  push:
    branches: [ main ]

permissions:
  id-token: write
  contents: read

jobs:
  debug:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: DEBUG: show resolved provider & SA
        run: |
          echo "GCP_PROJECT_NUMBER='${{ secrets.GCP_PROJECT_NUMBER }}'"
          echo "WIF_POOL='${{ secrets.WIF_POOL }}'"
          echo "WIF_PROVIDER='${{ secrets.WIF_PROVIDER }}'"
          echo "Resolved provider:"
          echo "projects/${{ secrets.GCP_PROJECT_NUMBER }}/locations/global/workloadIdentityPools/${{ secrets.WIF_POOL }}/providers/${{ secrets.WIF_PROVIDER }}"
          echo "Service account: ${{ secrets.GCP_SA_EMAIL }}"
